!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);const n=document.querySelector(".modal"),i=document.querySelector(".modal-message"),a=document.querySelector("#upload_doctors");let c=!0;function o(){n.classList.add("show"),setTimeout(()=>{n.classList.add("fade")},10);const t=document.createElement("div");t.classList.add("close-modal"),t.addEventListener("click",s),i.appendChild(t)}function s(){n.classList.remove("fade")}function l(){let t=document.createElement("button");t.classList.add("upload-btn","all-round-corners"),t.id="upload_sample",t.innerHTML="Загрузить <kbd>sample.json</kbd>",i.appendChild(t),t.addEventListener("click",()=>{let t=new XMLHttpRequest;t.open("GET","https://raw.githubusercontent.com/sviperm/doctors-list/master/data.json",!0),t.onreadystatechange=()=>{4==t.readyState&&"200"==t.status&&(E(),D(JSON.parse(t.responseText)),_())},t.send(),s()}),(t=document.createElement("button")).classList.add("upload-btn","all-round-corners"),t.id="upload_from_pc",t.innerHTML='Загрузить с компьютера<input type="file" id="file_input" style="display: none" accept=".json">',i.appendChild(t),t.addEventListener("click",()=>document.getElementById("file_input").click()),document.getElementById("file_input").addEventListener("change",t=>{let e=new FileReader;e.readAsText(t.target.files[0]),e.onload=t=>{E(),D(JSON.parse(t.target.result)),_()},s()})}n.addEventListener("transitionend",t=>{if(t.target===n&&(c=!c))for(n.classList.remove("show");i.firstChild;)i.removeChild(i.firstChild)}),window.addEventListener("click",t=>{c||t.target===i||i.contains(t.target)||s()}),a.addEventListener("click",()=>{l(),o()});const d=document.querySelector(".doctors-board"),f=document.querySelector("#clear_doctors"),u=document.getElementById("toggle_order"),p=document.getElementById("toggle_fav"),g=document.getElementById("order_by"),v=document.getElementById("filter_by");let m=!1,y=!1;function b(t){const e={DOMtype:"div"};Object.assign(e,t);const r=document.createElement(e.DOMtype);for(const t in e)switch(t){case"attrs":e[t].forEach(t=>{r.setAttribute(t[0],t[1])});break;case"cssList":e[t].forEach(t=>{r.classList.add(t)});break;case"event":r.addEventListener(e[t].action,e[t].callback);break;default:r[t]=e[t]}return e.hasOwnProperty("parent")&&e.parent.appendChild(r),r}function L(t,e){const r=b({cssList:["doctor-card"]}),n=b({cssList:["doc-info"],parent:r}),a=b({cssList:["fav-doc-btn"],parent:n}),c=b({DOMtype:"input",cssList:e.isFavorite?["fav-btn-load"]:["fav-btn"],type:"checkbox",id:`doc_id_${e.id}`,attrs:e.isFavorite?[["checked",""]]:[[]],parent:a});c.addEventListener("click",()=>{e.isFavorite=!e.isFavorite,M(e.id,"isFavorite",e.isFavorite),c.classList.remove("fav-btn-load"),c.classList.add("fav-btn")});b({DOMtype:"label",attrs:[["for",`doc_id_${e.id}`]],innerHTML:'<svg id="heart-svg" viewBox="467 392 58 57" xmlns="http://www.w3.org/2000/svg"><g id="Group" fill="none" fill-rule="evenodd" transform="translate(467 392)"><path d="M29.144 20.773c-.063-.13-4.227-8.67-11.44-2.59C7.63 28.795 28.94 43.256 29.143 43.394c.204-.138 21.513-14.6 11.44-25.213-7.214-6.08-11.377 2.46-11.44 2.59z" id="heart" fill="#AAB8C2" /><circle id="main-circ" fill="#E2264D" opacity="0" cx="29.5" cy="29.5" r="1.5" /><g id="grp7" opacity="0" transform="translate(7 6)"><circle id="oval1" fill="#9CD8C3" cx="2" cy="6" r="2" /><circle id="oval2" fill="#8CE8C3" cx="5" cy="2" r="2" /></g><g id="grp6" opacity="0" transform="translate(0 28)"><circle id="oval1" fill="#CC8EF5" cx="2" cy="7" r="2" /><circle id="oval2" fill="#91D2FA" cx="3" cy="2" r="2" /></g><g id="grp3" opacity="0" transform="translate(52 28)"><circle id="oval2" fill="#9CD8C3" cx="2" cy="7" r="2" /><circle id="oval1" fill="#8CE8C3" cx="4" cy="2" r="2" /></g><g id="grp2" opacity="0" transform="translate(44 6)"><circle id="oval2" fill="#CC8EF5" cx="5" cy="6" r="2" /><circle id="oval1" fill="#CC8EF5" cx="2" cy="2" r="2" /></g><g id="grp5" opacity="0" transform="translate(14 50)"><circle id="oval1" fill="#91D2FA" cx="6" cy="5" r="2" /><circle id="oval2" fill="#91D2FA" cx="2" cy="2" r="2" /></g><g id="grp4" opacity="0" transform="translate(35 50)"><circle id="oval1" fill="#F48EA7" cx="6" cy="5" r="2" /><circle id="oval2" fill="#F48EA7" cx="2" cy="2" r="2" /></g><g id="grp1" opacity="0" transform="translate(24)"><circle id="oval1" fill="#9FC7FA" cx="2.5" cy="3" r="2" /><circle id="oval2" fill="#9FC7FA" cx="7.5" cy="2" r="2" /></g></g></svg>',parent:a}),b({DOMtype:"img",cssList:["doc-pic"],src:e.avatar,parent:n}),b({cssList:["doc-full-name"],textContent:e.name,parent:n});const s=b({cssList:["doc-rating"],parent:n});s.appendChild(function(t){const e=b({DOMtype:"fieldset",cssList:["rating"]});for(let r=5;r>0;r-=.5)b({DOMtype:"input",type:"checkbox",id:"star"+r,attrs:t===r?[["disabled",""],["checked",""]]:[["disabled",""]],parent:e}),b({DOMtype:"label",cssList:r%1==0?["full"]:["half"],arrts:[["for","star"+r]],parent:e});return e}(e.rating)),s.innerHTML+=e.rating;b({cssList:["doc-address"],innerHTML:`<i class="fas fa-map-marker-alt" style="margin-right: 7px"></i>${e.address}`,parent:n});const l=b({cssList:["doc-sub-info"],parent:r}),d=(b({cssList:["doc-spec"],innerHTML:`Специальность<div class="spec-name">${e.speciality}</div></div>`,parent:l}),b({DOMtype:"button",cssList:["doc-date-btn"],innerHTML:`<div class="bell-btn"><i id="bell" class="${e.isDated?"fas":"far"} fa-bell"></i></div><div class="text-btn">Записаться<br>на прием</div>`,id:`date_doc_${e.id} `,parent:l,event:{action:"click",callback:()=>{if(!e.isDated){e.isDated=!e.isDated,M(e.id,"isDated",e.isDated),d.querySelector(".far").className="fas fa-bell";b({innerHTML:`Мы вам перезвоним на номер ${t.phone}, чтобы согласовать запись к врачу ${e.name}`,parent:i});o()}}}}));return r}function h(){let t=C();!function(){y&&(t.doctors=t.doctors.filter(t=>t.isFavorite));const e=v.options[v.selectedIndex];"all"!==e.value&&(t.doctors=t.doctors.filter(t=>t[e.value]===e.dataset.filter))}(),function(){const e=g.options[g.selectedIndex].value;t.doctors="name"===e?t.doctors.sort((t,r)=>t[e]>r[e]?1:-1):t.doctors.sort((t,r)=>t[e]<r[e]?1:-1),m&&t.doctors.reverse()}(),t.doctors.forEach(e=>{const r=L(t.user,e);d.appendChild(r)})}function E(){for(;d.firstChild;)d.removeChild(d.firstChild)}function x(){E(),h()}function C(){let t=localStorage.getItem("data");if(t)return JSON.parse(t)}function D(t){localStorage.setItem("data",JSON.stringify(t))}function k(){localStorage.clear()}function _(){const t=C();t?(document.querySelector(".profile-area").textContent=t.user.name,h()):(l(),o())}function M(t,e,r){let n=C();if(n)for(let i=0;i<n.doctors.length;i++)if(n.doctors[i].id===t){n.doctors[i][e]=r,D(n);break}}f.addEventListener("click",()=>{k(),E(),l(),o()}),u.addEventListener("click",()=>{m=!m,u.classList.toggle("toggled"),x()}),p.addEventListener("click",()=>{y=!y,p.classList.toggle("toggled"),x()}),[g,v].forEach(t=>{t.addEventListener("change",()=>{x()})}),r.d(e,"getData",function(){return C}),r.d(e,"updateData",function(){return D}),r.d(e,"clearData",function(){return k}),r.d(e,"visualizeData",function(){return _}),r.d(e,"updateDoctorsData",function(){return M}),_()}]);