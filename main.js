!function(e){var t={};function i(n){if(t[n])return t[n].exports;var d=t[n]={i:n,l:!1,exports:{}};return e[n].call(d.exports,d,d.exports,i),d.l=!0,d.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var d in e)i.d(n,d,function(t){return e[t]}.bind(null,d));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t){const i=document.querySelector(".modal"),n=document.querySelector(".modal-message");let d=!0;function r(){i.classList.add("show"),setTimeout(()=>{i.classList.add("fade")},10);const e=document.createElement("div");e.classList.add("close-modal"),e.addEventListener("click",c),n.appendChild(e)}function c(){i.classList.remove("fade")}function o(){let e=localStorage.getItem("data");if(e)return JSON.parse(e)}function a(e){localStorage.setItem("data",JSON.stringify(e))}function l(){const e=o();e?(document.querySelector(".profile-area").textContent=e.user.name,L()):(C(),r())}function s(e,t,i){let n=o();if(n)for(let d=0;d<n.doctors.length;d++)if(n.doctors[d].id===e){n.doctors[d][t]=i,a(n);break}}i.addEventListener("transitionend",function(e){if(e.target===i&&(d=!d))for(i.classList.remove("show");n.firstChild;)n.removeChild(n.firstChild)}),window.addEventListener("click",function(e){d||e.target===n||n.contains(e.target)||c()});const u=document.querySelector(".doctors-board"),f=document.querySelector("#upload_doctors"),p=(document.querySelector("#upload_sample"),document.querySelector("#upload_from_pc"),document.querySelector("#clear_doctors")),m=document.getElementById("toggle_order"),v=document.getElementById("toggle_fav"),g=document.getElementById("order_by"),y=document.getElementById("filter_by");let b=!1,h=!1;function C(){let e=document.createElement("button");e.classList.add("upload-btn","all-round-corners"),e.id="upload_sample",e.innerHTML="Загрузить <kbd>sample.json</kbd>",n.appendChild(e),e.addEventListener("click",()=>{let e=new XMLHttpRequest;e.open("GET","https://raw.githubusercontent.com/sviperm/doctors-list/master/data.json",!0),e.onreadystatechange=function(){4==e.readyState&&"200"==e.status&&(_(),a(JSON.parse(e.responseText)),l())},e.send(),c()}),(e=document.createElement("button")).classList.add("upload-btn","all-round-corners"),e.id="upload_from_pc",e.innerHTML='Загрузить с компьютера<input type="file" id="file_input" style="display: none" accept=".json">',n.appendChild(e),e.addEventListener("click",()=>document.getElementById("file_input").click()),document.getElementById("file_input").addEventListener("change",e=>{let t=new FileReader;t.readAsText(e.target.files[0]),t.onload=e=>{_(),a(JSON.parse(e.target.result)),l()},c()})}function E(e,t){function i(e,t,i){const n=document.createElement(e);return t&&n.classList.add(t),i&&(n.innerHTML=i),n}const d=i("div","doctor-card"),c=i("div","doc-info"),o=i("div","fav-doc-btn"),a=document.createElement("input");t.isFavorite?a.classList.add("fav-btn-load"):a.classList.add("fav-btn"),a.type="checkbox",a.id=`doc_id_${t.id}`,t.isFavorite&&a.setAttribute("checked",""),a.addEventListener("click",function(){t.isFavorite=!t.isFavorite,s(t.id,"isFavorite",t.isFavorite),a.classList.remove("fav-btn-load"),a.classList.add("fav-btn")});const l=i("label","",'<svg id="heart-svg" viewBox="467 392 58 57" xmlns="http://www.w3.org/2000/svg"><g id="Group" fill="none" fill-rule="evenodd" transform="translate(467 392)"><path d="M29.144 20.773c-.063-.13-4.227-8.67-11.44-2.59C7.63 28.795 28.94 43.256 29.143 43.394c.204-.138 21.513-14.6 11.44-25.213-7.214-6.08-11.377 2.46-11.44 2.59z" id="heart" fill="#AAB8C2" /><circle id="main-circ" fill="#E2264D" opacity="0" cx="29.5" cy="29.5" r="1.5" /><g id="grp7" opacity="0" transform="translate(7 6)"><circle id="oval1" fill="#9CD8C3" cx="2" cy="6" r="2" /><circle id="oval2" fill="#8CE8C3" cx="5" cy="2" r="2" /></g><g id="grp6" opacity="0" transform="translate(0 28)"><circle id="oval1" fill="#CC8EF5" cx="2" cy="7" r="2" /><circle id="oval2" fill="#91D2FA" cx="3" cy="2" r="2" /></g><g id="grp3" opacity="0" transform="translate(52 28)"><circle id="oval2" fill="#9CD8C3" cx="2" cy="7" r="2" /><circle id="oval1" fill="#8CE8C3" cx="4" cy="2" r="2" /></g><g id="grp2" opacity="0" transform="translate(44 6)"><circle id="oval2" fill="#CC8EF5" cx="5" cy="6" r="2" /><circle id="oval1" fill="#CC8EF5" cx="2" cy="2" r="2" /></g><g id="grp5" opacity="0" transform="translate(14 50)"><circle id="oval1" fill="#91D2FA" cx="6" cy="5" r="2" /><circle id="oval2" fill="#91D2FA" cx="2" cy="2" r="2" /></g><g id="grp4" opacity="0" transform="translate(35 50)"><circle id="oval1" fill="#F48EA7" cx="6" cy="5" r="2" /><circle id="oval2" fill="#F48EA7" cx="2" cy="2" r="2" /></g><g id="grp1" opacity="0" transform="translate(24)"><circle id="oval1" fill="#9FC7FA" cx="2.5" cy="3" r="2" /><circle id="oval2" fill="#9FC7FA" cx="7.5" cy="2" r="2" /></g></g></svg>');l.setAttribute("for",`doc_id_${t.id}`);const u=i("img","doc-pic");u.src=t.avatar;const f=i("div","doc-full-name",t.name),p=i("div","doc-rating");p.appendChild(function(e){const t=document.createElement("fieldset");t.classList.add("rating");for(let i=5;i>0;i-=.5){const n=document.createElement("input");n.type="checkbox",n.id="star"+i,n.setAttribute("disabled",""),e===i&&n.setAttribute("checked","");const d=document.createElement("label");i%1==0?d.classList.add("full"):d.classList.add("half"),d.setAttribute("for","star"+i),t.appendChild(n),t.appendChild(d)}return t}(t.rating)),p.innerHTML+=t.rating;const m=i("div","doc-address",`<i class="fas fa-map-marker-alt" style="margin-right: 7px"></i>${t.address}`),v=i("div","doc-sub-info"),g=i("div","doc-spec",`Специальность<div class="spec-name">${t.speciality}</div></div>`),y=i("button","doc-date-btn",`<div class="bell-btn"><i id="bell" class="${t.isDated?"fas":"far"} fa-bell"></i></div><div class="text-btn">Записаться<br>на прием</div>`);return y.id=`date_doc_${t.id} `,y.addEventListener("click",()=>{if(!t.isDated){t.isDated=!t.isDated,s(t.id,"isDated",t.isDated),y.querySelector(".far").className="fas fa-bell",function(e,t){let i=document.createElement("div");i.innerHTML=`Мы вам перезвоним на номер ${e}, чтобы согласовать запись к врачу ${t}`,n.appendChild(i)}(e.phone,t.name),r()}}),d.appendChild(c),c.appendChild(o),o.appendChild(a),o.appendChild(l),c.appendChild(u),c.appendChild(f),c.appendChild(p),c.appendChild(m),d.appendChild(v),v.appendChild(g),v.appendChild(y),d}function L(){let e=o();!function(){h&&(e.doctors=e.doctors.filter(e=>e.isFavorite));const t=y.options[y.selectedIndex];"all"!==t.value&&(e.doctors=e.doctors.filter(e=>e[t.value]===t.dataset.filter))}(),function(){const t=g.options[g.selectedIndex].value;e.doctors="name"===t?e.doctors.sort((e,i)=>e[t]>i[t]?1:-1):e.doctors.sort((e,i)=>e[t]<i[t]?1:-1),b&&e.doctors.reverse()}(),e.doctors.forEach(t=>{const i=E(e.user,t);u.appendChild(i)})}function x(){_(),L()}function _(){for(;u.firstChild;)u.removeChild(u.firstChild)}f.addEventListener("click",()=>{C(),r()}),p.addEventListener("click",()=>{localStorage.clear(),_(),C(),r()}),m.addEventListener("click",()=>{b=!b,m.classList.toggle("toggled"),x()}),v.addEventListener("click",()=>{h=!h,v.classList.toggle("toggled"),x()}),[g,y].forEach(e=>{e.addEventListener("change",()=>{x()})}),l()}]);